{% extends "web_ui/base.html" %}
{% load static %}
{% block title_suffix %}| Publish core{% endblock %}
{% block extra_head %}
    <script src="{% static 'js/expandable_section.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
    <style>
        label { display: block; margin-top: 1em; }
        .hidden { display: none; }
        #result { margin-top: 2em; }
    </style>
{% endblock %}
{% block content %}
    <!-- Hidden card header template for JS use -->
    <div id="card-header-template" style="display:none;">
        {% include "web_ui/includes/card_header.html" with icon="bi __ICON__" title="__TITLE__" %}
    </div>

    <div class="card shadow-sm mb-4">
        {% include "web_ui/includes/card_header.html" with icon="bi bi-box" title="Publish new core" %}
        <div class="card-body">
            <form id="repo-form" autocomplete="off" class="row g-2 align-items-center">
                <div class="col-auto">
                    <label for="repo_url" class="visually-hidden">GitHub Repository URL</label>
                    <input type="url" id="repo_url" name="repo_url" class="form-control" style="min-width:350px; width:400px;" required placeholder="https://github.com/owner/repo">
                </div>
                <div class="col-auto">
                    <label for="version_type" class="visually-hidden">Version Type</label>
                    <select id="version_type" name="version_type" class="form-select" required>
                        <option value="tag">Tag</option>
                        <option value="latest">Latest</option>
                        <option value="commit">Commit</option>
                    </select>
                </div>
                <div class="col-auto" id="tag-field" style="display:none;">
                    <label for="tag" class="visually-hidden">Tag</label>
                    <select id="tag" name="tag" class="form-select"></select>
                </div>
                <div class="col-auto" id="commit-field" style="display:none;">
                    <label for="commit" class="visually-hidden">Commit Hash</label>
                    <input type="text" id="commit" name="commit" class="form-control" placeholder="e.g. 1a2b3c4d">
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn btn-primary">Parse</button>
                </div>
            </form>
            <div id="result"></div>
        </div>
    </div>
    
    <script src="{% static 'js/publish_core_from_github.js' %}"></script>
{% endblock %}